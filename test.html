<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Socket.IO Client Test</title>
    <script src="https://cdn.socket.io/4.0.0/socket.io.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }
        #leaderboard {
            margin-top: 20px;
        }
        #leaderboard ul {
            list-style-type: none;
            padding: 0;
        }
        #leaderboard li {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <h1>Socket.IO Client Test</h1>
    
    <div id="gameState">
        <h2>Game State</h2>
        <div id="gameStatus"></div>
        <div id="foodPosition"></div>
    </div>
    
    <div id="leaderboard">
        <h3>Leaderboard</h3>
        <ul>
            <!-- Leaderboard entries will be added here -->
        </ul>
    </div>

    <script>
        const socket = io("http://localhost:5000");
    
        socket.on('connect', () => {
            console.log("Connected to server");
            socket.emit('join_game', { player_id: 'player1' });
        });
    
        socket.on('message', (data) => {
            console.log(data);
        });
    
        socket.on('game_state', (data) => {
            console.log(data);
    
            // Update game state (snakes and food)
            const gameStatus = document.getElementById('gameStatus');
            const foodPosition = document.getElementById('foodPosition');
            
            gameStatus.innerHTML = "<strong>Snakes:</strong><br>";
            for (let playerId in data.snakes) {
                gameStatus.innerHTML += `${playerId}: ${JSON.stringify(data.snakes[playerId].body)}<br>`;
            }
    
            foodPosition.innerHTML = `<strong>Food Position:</strong> [${data.food[0]}, ${data.food[1]}]`;
    
            // Update the leaderboard
            if (data.leaderboard) {
                updateLeaderboard(data.leaderboard);
            }
        });
    
        socket.on('disconnect', () => {
            console.log("Disconnected from server");
        });
    
        function updateLeaderboard(leaderboard) {
            const leaderboardContainer = document.getElementById('leaderboard').getElementsByTagName('ul')[0];
            leaderboardContainer.innerHTML = ''; // Clear existing leaderboard
    
            leaderboard.forEach(function(entry) {
                const li = document.createElement('li');
                li.textContent = `${entry[0]}: ${entry[1]} points`;
                leaderboardContainer.appendChild(li);
            });
        }
    </script>

    
</body>
</html>
